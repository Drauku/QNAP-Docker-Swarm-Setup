# Filebrowser Recipe
# ${configs_folder}/filebrowser/filebrowser.yml
version: "3.4"

services:
  app:
    image: filebrowser/filebrowser:latest
    volumes:
      # Base scope of filebrowser access on your server:
      - ${appdata_folder}/config:/srv 
      - ${configs_folder}/filebrowser/config.json:/etc/config.json
      - ${runtime_folder}/filebrowser/database:/etc/database.db
    networks:
      - traefik_public
    deploy:
      labels:
        - "traefik.enable=true"
        - "traefik.http.routers.filebrowser.entrypoints=https"
        - "traefik.http.routers.filebrowser.rule=Host(`filebrowser.${var_domain}`)"
        - "traefik.http.routers.filebrowser.tls.certresolver=${var_certresolver}"
        - "traefik.http.routers.filebrowser.middlewares=forward-auth@file"
        - "traefik.http.services.filebrowser.loadbalancer.server.port=80"      
      
networks:
  traefik_public:
    external: true
